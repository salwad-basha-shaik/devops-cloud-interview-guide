# ðŸŒŸ Trust Policy vs STS

## Question

**What is the difference between a Trust Policy and AWS STS (Security Token Service), and how are they related?**

---

## Short Explanation

This question checks your understanding of IAM role assumptions in AWS. Many confuse trust policies with permissions. The interviewer wants to know if you can explain who can assume a role (trust policy) and how temporary credentials are issued (STS).

---

## Answer

- **Trust Policy:** Defines who is allowed to assume a role (IAM users, roles, accounts, or AWS services).
- **STS (Security Token Service):** Provides temporary credentials (Access Key, Secret Key, Session Token) when a trusted principal assumes the role.
- **Relation:** STS enforces the trust policy. If the trust policy allows, STS issues temporary credentials.

---

## Detailed Explanation with Example

### ðŸ“Œ Trust Policy = Door Lock
- Attached to an IAM role.
- Decides who can enter (assume the role).
- Example: Allow EC2 service or an IAM user from another account to assume the role.

### ðŸ“Œ STS = Doorman
- Issues temporary access badges once the lock approves.
- Main API: `sts:AssumeRole`
- Temporary credentials expire (default 1h, up to 12h).

### ðŸ”— Relation
- Trust policy = Authorization check.
- STS = Execution service that issues temporary credentials.

---

## Real-World Example

**Scenario:**  
A developer in Account A needs to access an S3 bucket in Account B.

**Steps:**  
1. In Account B, create a role with:
   - **Trust Policy** â†’ allows Account Aâ€™s user to assume it.
   - **Permissions Policy** â†’ grants S3 access.
2. Developer in Account A runs:

```bash
aws sts assume-role 
â€“role-arn arn:aws:iam::AccountB-ID:role/S3AccessRole 
â€“role-session-name DevToS3
```

3. STS checks the trust policy. If allowed, it returns temporary credentials.
4. Developer uses these credentials to access S3 in Account B.

---

## Summary Table

| Aspect          | Trust Policy                       | STS (Security Token Service)        |
|-----------------|------------------------------------|-------------------------------------|
| Purpose         | Defines who can assume a role      | Issues temporary credentials        |
| Attached To     | IAM Role                           | AWS Service                        |
| Action          | sts:AssumeRole allowed or denied   | Executes sts:AssumeRole            |
| Scope           | Control over who can request access| Provides how access is granted      |
| Example         | EC2 can assume a role              | STS returns temp keys to EC2        |

---

## âœ… One line for interviews

A Trust Policy defines who is allowed to assume a role, while STS provides the temporary credentials once that trust is validated.

